<?php
abstract class AbstractFileUpload {
abstract function validate($fileProperties);
function upload() {
    if(isset($_FILES['file'])){
        $errors= array();
        $file_name = $_FILES['file']['name'];
        $file_size =$_FILES['file']['size'];
        $file_tmp =$_FILES['file']['tmp_name'];
        $file_type=$_FILES['file']['type'];
        $file_ext=strtolower(end(explode('.',$_FILES['file']['name'])));
        $file_properties = new FileProperties($file_name, $file_size, $file_type);
        $isValid = $this->validate($file_properties);
        if($isValid) {
            
        } else {

        }
        if($file_size > 2097152){
           $errors[]='File size must be excately 2 MB';
        }
        $file_destination = $_SERVER['DOCUMENT_ROOT']."/VulnerableApp-php/images/".$file_name;
        if(empty($errors)==true){
           move_uploaded_file($file_tmp,$file_destination);
           echo "{\"isValid\": true,
              \"content\": \"".$file_destination."\"}";
        }else{
           echo "{\"isValid\": false,
              \"content\": ".json_encode($errors)."}";
        }
    }
    
}

}
?>